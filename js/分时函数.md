---
layout: post
title: 分时函数
date: 2017-05-08
description: 设计模式之分时函数
img: post-1.jpg
tags: [JS]
author: 詹志方
---
#### 分时函数用于解决首次加载或渲染过多资源造成浏览器卡顿的现象，可以有效解决浏览器性能问题

```js
function timeChunk(arr, count, fn, interval = 200) {
    let newArr = [];
    let time = 0;
    let timer = null;
    const start = function() {
        newArr = arr.splice(0, count);
        fn(count);
    }
    
    return function() {
        timer = setInterval(function(){
            time = interval;
            if (arr.length === 0) return clearInterval(timer);
            start();
        }, time)
    }
}
```
- 参数arr：要加载的全部资源
- count：一次加载资源的个数
- fn：加载资源方法
- interval：加载资源间隔时间